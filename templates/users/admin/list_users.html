{% extends 'components/dashboard.html' %}

{% block content_dashboard %}

{% include 'components/search.html' %}

<div class="mt-8 bg-white p-4 shadow rounded-lg">
    <div class="flex mx-auto justify-between">
        <h2 class="text-gray-500 text-lg font-semibold pb-4">Lista de Empleados</h2>
        <a href="{% url 'users:new_user' %}" class="bg-cyan-500 my-auto text-sm hover:bg-cyan-600 text-white py-1 px-4 rounded-lg">
            Agregar
        </a>
    </div>
    <div class="my-1"></div> <!-- Espacio de separación -->
    <div class="bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-6"></div> <!-- Línea con gradiente -->
    {% if users %}
        <table class="w-full table-auto text-sm">
            <thead>
                <tr class="text-sm leading-normal text-left">
                    <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light">Nombre Completo</th>
                    <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light">Email o Username</th>
                    <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"></th>
                    
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr class="hover:bg-grey-lighter">
                    <td class="py-2 px-4 border-b border-grey-light">{{ user.first_name }} {{ user.last_name }}</td>
                    <td class="py-2 px-4 border-b border-grey-light">{{ user.email }}</td>
                    <td class="py-2 px-4 border-b border-grey-light">
                        <a onclick="alertDelete(this.href);return false;" href="{% url 'users:delete_user' user.id %}">

                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="text-red-600 w-6 h-6 hover:text-red-500">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                              </svg>                              

                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No tienes usuarios asociados aun</p>
    {% endif %}
    <!-- Botón "Ver más" para la tabla de Autorizaciones Pendientes -->
    {% comment %} <div class="text-right mt-4">
        <button class="bg-cyan-500 hover:bg-cyan-600 text-white font-semibold py-2 px-4 rounded">
            Ver más
        </button>
    </div> {% endcomment %}
</div>

<script>
    function alertDelete(url){
        var response = confirm("¿Estás seguro de que deseas este producto?");
        if (response === true) {
        window.location.href = url;
        }
    }
</script>


{% endblock content_dashboard %}